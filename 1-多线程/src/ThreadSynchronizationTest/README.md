## 该目录下对线程的同步进行介绍

##  线程的同步

### 问题的提出

- 多个线程执行的不确定性引起执行结果的不稳定

- 多个线程对账本的共享，会造成操作的不完整性，会破坏数据

  <img src="D:\Program Files (x86)\JavaProject\2-Java高级部分\1-多线程\README.assets\image-20220121091650637-16427278254601.png" alt="image-20220121091650637" style="zoom:50%;" />

1. 问题：买票过程中，出现了重票和错票问题，出现线程安全问题。

2. 原因：当某个线程操作车票的过程中，在尚未完成操作时，其他线程也参与进来，从而导致出现问问题

3. 如何解决：当一个线程a在操作ticket的时候，其他线程不能参与进来，直到线程a操作完成ticket操作时
   其他线程才可以进行操作。这种情况，即使线程a出现了阻塞，也不能被改变。

4. 在Java中，我们通过同步机制，来解决线程的安全问题

    1. #### 方式一：同步代码块

   ```java
   synchronized(同步监视器) {
   	// 需要被同步的代码
   
   }
   ```

   说明：

    	1. 操作共享数据的代码，即为需要被同步的代码。
    	2. 共享数据：多个线程共同操作的变量。比如：ticket
    	3. 同步监视器，俗称：锁。**任何一个类的对象**，都可以充当锁

   ​          要求：多个线程必须要共用同一把锁。

    4. (补充)在通过实现接口来实现多线程的方式中，可以考虑通过使用this来充当同步监视器
    5. (补充)在通过继承来实现多线程的方式中，要慎用this来充当监视器，可以考虑当前类充当同步监视器



2. #### 方式二 ：同步方法

   如果操作共享数据的代码完成的声明在一个方法中，我们不妨将此方法声明为同步的。
   关于同步方法的总结：

    1. 同步方法仍然涉及到同步监视器，只是不需要我们显式的声明
    2. 非静态的同步方法，同步监视器是：this
    3. 静态的同步方法，同步监视器是：当前类本身

5. 优点：同步的方式，解决了线程的安全问题
   局限性：操作同步代码时，只能有一个线程参与，其他线程等待。相等于是一个单线程的过程，效率较低。